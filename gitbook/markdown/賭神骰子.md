###### tags: `micropython`
賭神骰子
====

[![IMAGE_ALT](/uploads/upload_0f1a6a52333d040027214888c81a97c8.png =45%x)](https://youtu.be/WPofaTVh6N4) ![](/uploads/upload_a0f716edd0df817f5602d52d54b7ef4c.png =45%x)

### ADXL345
![](/uploads/upload_3e25d91422cb707fdc4b74f6a66fcec5.png)


### 使用 adxl345晶片判斷 x,y,z (roll , pitch)
![](/uploads/upload_4916356e47fe29032b62bf6ede940ae0.png =60%x)



### 開發板程式碼
```python=
from webduino import *
import time, os, adxl345
from machine import Pin,I2C

i2c = I2C(scl=Pin(4),sda=Pin(5), freq=10000)
adx = adxl345.ADXL345(i2c)
gnd = Pin(15,Pin.OUT)
gnd.off()

# wemos
wemos = Board('adxl345')
wemos.connect("KingKit_2.4G","webduino")
print("start...",wemos.deviceId)

val = 10
lastVal = 0

while True:
    x=adx.xValue
    y=adx.yValue
    z=adx.zValue
    #print('The acceleration info of x, y, z are:%d,%d,%d'%(x,y,z))
    roll,pitch = adx.RP_calculate(x,y,z)
    if(abs(roll)<15 and abs(pitch)<15):
        val = 1
    elif(abs(roll)>165 and abs(pitch)<15):
        val = 6
    elif(pitch>-90 and pitch<-70):
        val = 2
    elif(roll<0 and abs(roll)>80 and abs(pitch)<10):
        val = 3
    elif(roll>70 and abs(pitch)<10):
        val = 4
    elif(pitch>70):
        val = 5  
    if val != lastVal:
        lastVal = val
        #print('roll=',roll,',pitch=',pitch)
        print(val)
        wemos.mqtt.pub("wa5499/adxl345",str(val))
    time.sleep_ms(50)
    wemos.check()
```